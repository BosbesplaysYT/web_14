{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <h2>{{ post.title }}</h2>
    <p><strong>Datum:</strong> {{ post.date }}</p>
    <div class="post-content">{{ post.content|safe }}</div>

    <hr>

    <!-- Comment section -->
    <h3>Reacties op "{{ post.title }}"</h3> <!-- Link to the post title -->

    {% if comments %}
        <div class="comments-section">
            {% for comment in comments %}
                <div class="comment">
                    <p><strong>{{ comment.username }}</strong> zegt:</p>
                    <p>{{ comment.content }}</p>
                    <p><small>{{ comment.timestamp }}</small></p>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Nog geen reacties. Wees de eerste!</p>
    {% endif %}


    <hr>
    <!-- Add comment form (only if logged in) -->
    {% if session.logged_in %}
        <h4>Reactie:</h4>
        <form method="POST" action="{{ url_for('view_post', post_id=post.id) }}">
            <textarea name="comment" placeholder="Schrijf hier je reactie..." required></textarea>
            <br>
            <button type="submit">Reageer</button>
        </form>
    {% else %}
        <p>Je moet <a href="{{ url_for('login') }}">Ingelogd</a> zijn om te reageren.</p>
    {% endif %}

    <br>
    <button class="back-button" onclick="window.location.href='{{ url_for('index') }}';">Terug naar de blog posts</button>
{% endblock %}
